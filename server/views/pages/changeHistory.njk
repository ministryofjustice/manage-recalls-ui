{% extends "../partials/layout.njk" %}

{% set pageTitle = applicationName + " - Change history" %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            <h1 class="govuk-heading-xl">
                Change history
            </h1>
             <h2 class="govuk-heading-l">
                Documents
            </h2>

            {% if recall.documentsUploaded.length %}
            <table class="govuk-table" id="table-uploaded" data-module="moj-sortable-table" data-qa='uploadedDocuments'>
                <caption class="govuk-table__caption govuk-table__caption--m">Uploaded</caption>
                <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header govuk-!-width-one-third" aria-sort="ascending">Document</th>
                    <th scope="col" class="govuk-table__header" aria-sort="none">Date and time</th>
                </tr>
                </thead>
                <tbody class="govuk-table__body">
                {% for document in sortList(recall.documentsUploaded, 'standardFileName') %}
                <tr class="govuk-table__row" data-qa='{{ document.documentId }}'>
                    <td class="govuk-table__cell" data-sort-value='{{ document.standardFileName }}' data-qa='fileName'>
                        {%  include '../partials/uploadedDocumentLink.njk' %}
                    </td>
                    <td class="govuk-table__cell" data-sort-value='{{ isoDateToMillis(document.createdDateTime) }}' data-qa='createdDateTime'>{{ document.createdDateTime | dateTime }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            <script nonce='{{ cspNonce }}'>
              new MOJFrontend.SortableTable({
                table: $('#table-uploaded')[0]
              });
            </script>
            {% else %}
            No documents uploaded
            {% endif %}
        </div>
    </div>
{% endblock %}
