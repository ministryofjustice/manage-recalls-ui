{% extends "../partials/layout.njk" %}

{% set pageTitle = applicationName + " - Book a recall - Check the details before booking this recall" %}

{% block beforeContent %}
    {{ govukBackLink({
        text: "Back",
        href: backLinkUrl("upload-documents", urlInfo)
    }) }}
{% endblock %}

{% block content %}

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            {% if errors %}
                {{ govukErrorSummary({
                    titleText: "There is a problem",
                    errorList: errors.list,
                    attributes: {
                        'data-qa': 'error-list'
                    }
                }) }}
            {% endif %}
            <h1 class="govuk-heading-l">
                Check the details before booking this recall
            </h1>
        </div>
    </div>

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            {% include '../partials/personDetails.njk' %}
            {% include '../partials/recallRequestDetails.njk' %}
            {% include '../partials/sentenceDetails.njk' %}
            {% include '../partials/policeDetails.njk' %}
            {% include '../partials/issuesDetails.njk' %}
            {% include '../partials/probationDetails.njk' %}

            <h2 class='govuk-heading-m govuk-!-margin-top-9' id='documents'>Uploaded documents</h2>
            <dl class="govuk-summary-list">
                {% for document in recall.documents %}
                <div class="govuk-summary-list__row">
                    <dt class=" govuk-summary-list__key">
                        {{ document.label }}
                    </dt>
                    <dd class=" govuk-summary-list__value">
                        <a class='govuk-link' href='{{ document.url }}' target='_blank' data-qa='uploadedDocument-{{ document.category }}'>{{ document.fileName }}</a>
                    </dd>
                    <dd class=" govuk-summary-list__actions">
                        <a href='{{ changeLinkUrl('upload-documents', urlInfo, 'documents') }}' data-qa='uploadedDocument-{{ document.category }}-Change' class='govuk-link'>Change <span class="govuk-visually-hidden"> {{ document.label }}</span></a>
                    </dd>
                </div>
                {% endfor %}
            </dl>
            <div class="govuk-form-group govuk-!-margin-top-9">
                <form novalidate action="{{ formActionUrl('check-answers', urlInfo) }}" method="post">
                    <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
                    <button class="govuk-button" data-qa='continueButton'>
                        Complete booking
                    </button>
                </form>
            </div>

        </div>
    </div>

{% endblock %}
